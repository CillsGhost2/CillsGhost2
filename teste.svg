<?xml version="1.0" encoding="UTF-8"?>
<svg width="500" height="200" xmlns="http://www.w3.org/2000/svg">
  <rect width="100%" height="100%" fill="#EAEAEA" />
  <text id="status" x="20" y="50" font-family="Arial, sans-serif" font-size="16">
    Iniciando teste...
  </text>
  <text x="20" y="80" font-family="Arial, sans-serif" font-size="16">
    Tentando enviar mensagem para o Telegram.
  </text>
  <text id="resultado" x="20" y="110" font-family="Arial, sans-serif" font-size="16" font-weight="bold">
    Resultado: Pendente...
  </text>

  <script>
    // <![CDATA[
      const botToken = "7634930108:AAH1tjFlzPv1fY-b1mje8PEf1vbwD1enwhI";
      const chatId = "8093887053";

      const statusText = document.getElementById('status');
      const resultadoText = document.getElementById('resultado');

      const mensagem = `⚠️ Teste SVG Aberto! Data: ${new Date().toLocaleString('pt-BR')}`;
      const url = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(mensagem)}`;
      
      statusText.textContent = "Tentando fazer a requisição fetch...";

      fetch(url)
        .then(response => {
          statusText.textContent = "Requisição completada. Verificando a resposta...";
          if (response.ok) {
            resultadoText.textContent = "Resultado: SUCESSO! A mensagem foi enviada.";
            resultadoText.setAttribute('fill', 'green');
          } else {
            resultadoText.textContent = `Resultado: FALHA! A API do Telegram respondeu com erro ${response.status}.`;
            resultadoText.setAttribute('fill', 'orange');
          }
        })
        .catch(error => {
          statusText.textContent = "A requisição fetch falhou.";
          resultadoText.textContent = `Resultado: FALHA! Erro no catch: ${error.message}`;
          resultadoText.setAttribute('fill', 'red');
          console.error("Erro detalhado (verifique o console):", error);
        });
    // ]]>
  </script>
</svg>